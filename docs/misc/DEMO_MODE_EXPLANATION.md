# ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®šã®è©³ç´°èª¬æ˜Ž

## ðŸ“ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®šéƒ¨åˆ†ã®å ´æ‰€

### **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/main/java/ai/tensorlogic/llm/LLMService.java`

### **åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ53-56è¡Œç›®ï¼‰**:

```java
// ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š
boolean isDemoMode = apiKey == null || 
                    apiKey.equals("demo-mode") || 
                    apiKey.equals("your-api-key-here") ||
                    apiKey.isBlank();
```

---

## ðŸ” åˆ¤å®šæ¡ä»¶ã®è©³ç´°

### **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹4ã¤ã®æ¡ä»¶**

| æ¡ä»¶ | èª¬æ˜Ž | ä¾‹ |
|------|------|-----|
| `apiKey == null` | APIã‚­ãƒ¼ãŒnull | ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¤±æ•— |
| `apiKey.equals("demo-mode")` | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | ç’°å¢ƒå¤‰æ•°æœªè¨­å®šã®å ´åˆ |
| `apiKey.equals("your-api-key-here")` | ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ | application.yaml ã‚’ç·¨é›†ã—ã¦ã„ãªã„ |
| `apiKey.isBlank()` | ç©ºæ–‡å­—ã¾ãŸã¯ç©ºç™½ | `OPENAI_API_KEY=""` |

**ã©ã‚Œã‹1ã¤ã§ã‚‚è©²å½“ã™ã‚Œã°ã€ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™ã€‚**

---

## ðŸ”— ç’°å¢ƒå¤‰æ•°ã¨ã®é€£æº

### **application.yaml ã®è¨­å®šï¼ˆ28è¡Œç›®ï¼‰**:

```yaml
llm:
  openai:
    api-key: ${OPENAI_API_KEY:demo-mode}
```

**æ„å‘³**:
- `${OPENAI_API_KEY:...}`: ç’°å¢ƒå¤‰æ•° `OPENAI_API_KEY` ã®å€¤ã‚’èª­ã¿è¾¼ã‚€
- `:demo-mode`: ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤

### **å‹•ä½œä¾‹**:

#### **ã‚±ãƒ¼ã‚¹1: ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹**
```bash
export OPENAI_API_KEY="sk-proj-abc123..."
mvn quarkus:dev
```
â†’ `apiKey = "sk-proj-abc123..."`  
â†’ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š: **false** âœ… (OpenAI APIã‚’ä½¿ç”¨)

#### **ã‚±ãƒ¼ã‚¹2: ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„**
```bash
mvn quarkus:dev
```
â†’ `apiKey = "demo-mode"` (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤)  
â†’ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š: **true** âš ï¸ (ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œ)

#### **ã‚±ãƒ¼ã‚¹3: application.yamlã§ç›´æŽ¥è¨­å®š**
```yaml
api-key: sk-proj-abc123...
```
â†’ `apiKey = "sk-proj-abc123..."`  
â†’ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š: **false** âœ… (OpenAI APIã‚’ä½¿ç”¨)

---

## ðŸ“Š ãƒ­ã‚°å‡ºåŠ›ã®è©³ç´°

### **æ”¹å–„ã•ã‚ŒãŸãƒ­ã‚°å‡ºåŠ›**

curlã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ­ã‚°ãŒ**å¿…ãš**è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

#### **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆ** âŒ

```log
========================================
LLMã«è³ªå•: ã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã¯ç”Ÿãã¦ã„ã‚‹ã€‚
========================================
ðŸ“‹ APIã‚­ãƒ¼ã®çŠ¶æ…‹ã‚’ç¢ºèª:
  - è¨­å®šå€¤: demo-mode
  - null?: false
  - blank?: false
  - equals('demo-mode')?: true
  - equals('your-api-key-here')?: false
========================================
ðŸ”´ å‹•ä½œãƒ¢ãƒ¼ãƒ‰: ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰
âš ï¸  ç†ç”±: APIã‚­ãƒ¼ãŒæœªè¨­å®šã¾ãŸã¯ç„¡åŠ¹ã§ã™
ðŸ’¡ å®Ÿéš›ã®LLMã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯:
   1. ç’°å¢ƒå¤‰æ•° OPENAI_API_KEY ã‚’è¨­å®š
   2. ã¾ãŸã¯ application.yaml ã® api-key ã‚’å®Ÿéš›ã®ã‚­ãƒ¼ã«å¤‰æ›´
   3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•
========================================
ðŸŽ­ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§å›ºå®šãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™
========================================
ðŸŽ­ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰: LLMå¿œç­”ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
âš ï¸  æ³¨æ„: è³ªå•ã®å†…å®¹ã¯ç„¡è¦–ã•ã‚Œã€å›ºå®šãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™
========================================
ðŸ“ ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒ: 'ã‚½ã‚¯ãƒ©ãƒ†ã‚¹' ã‚’æ¤œå‡º
   â†’ ã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã®ä¸‰æ®µè«–æ³•ã®å›ºå®šãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™
```

#### **OpenAI APIãƒ¢ãƒ¼ãƒ‰ã®å ´åˆ** âœ…

```log
========================================
LLMã«è³ªå•: ã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã¯ç”Ÿãã¦ã„ã‚‹ã€‚
========================================
ðŸ“‹ APIã‚­ãƒ¼ã®çŠ¶æ…‹ã‚’ç¢ºèª:
  - è¨­å®šå€¤: sk-proj-AB...
  - null?: false
  - blank?: false
  - equals('demo-mode')?: false
  - equals('your-api-key-here')?: false
========================================
âœ… å‹•ä½œãƒ¢ãƒ¼ãƒ‰: OpenAI APIå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
ðŸ”‘ APIã‚­ãƒ¼: æ­£å¸¸ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™
========================================
ðŸ”§ OpenAiServiceã‚’åˆæœŸåŒ–ã—ã¾ã™...
âœ… OpenAiServiceåˆæœŸåŒ–å®Œäº†
ðŸš€ OpenAI APIã‚’å‘¼ã³å‡ºã—ã¾ã™...
   ãƒ¢ãƒ‡ãƒ«: gpt-4
âœ… OpenAI APIã‹ã‚‰å¿œç­”ã‚’å—ä¿¡ã—ã¾ã—ãŸ
   å¿œç­”é•·: 234 æ–‡å­—
```

---

## ðŸŽ¯ ã©ã¡ã‚‰ã®ãƒ¢ãƒ¼ãƒ‰ã§å‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹æ–¹æ³•

### **æ–¹æ³•1: ãƒ­ã‚°ã‚’ç¢ºèªï¼ˆæŽ¨å¥¨ï¼‰**

curlã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€Quarkusã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒ­ã‚°ã‚’ç¢ºèªï¼š

```bash
curl -X POST http://localhost:8080/api/camel/verify \
  -H 'Content-Type: application/json' \
  -d '"ã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã¯ç”Ÿãã¦ã„ã‚‹ã€‚"'
```

**ãƒ­ã‚°ã«ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã€ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰**:
```
ðŸ”´ å‹•ä½œãƒ¢ãƒ¼ãƒ‰: ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰
```

**ãƒ­ã‚°ã«ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã€OpenAI APIãƒ¢ãƒ¼ãƒ‰**:
```
âœ… å‹•ä½œãƒ¢ãƒ¼ãƒ‰: OpenAI APIå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
```

### **æ–¹æ³•2: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§åˆ¤æ–­**

#### **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®ç‰¹å¾´**:
- è³ªå•ã®å†…å®¹ã‚’ç„¡è¦–
- å¸¸ã«åŒã˜å›ºå®šãƒ¬ã‚¹ãƒãƒ³ã‚¹
- ã€Œã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã€ã‚’å«ã‚€è³ªå•ãªã‚‰ã€å¿…ãšã€Œã¯ã„ã€ã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã¯æ­»ã«ã¾ã™ã€‚ã€

#### **OpenAI APIãƒ¢ãƒ¼ãƒ‰ã®ç‰¹å¾´**:
- è³ªå•ã®å†…å®¹ã‚’ç†è§£
- è³ªå•ã«å¿œã˜ã¦ç•°ãªã‚‹å›žç­”
- ã€Œã‚½ã‚¯ãƒ©ãƒ†ã‚¹ã¯ç”Ÿãã¦ã„ã‚‹ã€ãªã‚‰ã€ã€Œã„ã„ãˆã€äº¡ããªã‚Šã¾ã—ãŸã€ã¨å›žç­”

---

## ðŸ”§ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰OpenAI APIãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã‚‹æ–¹æ³•

### **æ–¹æ³•1: ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼ˆæŽ¨å¥¨ï¼‰**

```bash
# 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ï¼ˆCtrl+Cï¼‰

# 2. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
export OPENAI_API_KEY="sk-proj-your-actual-key"

# 3. ç¢ºèª
echo $OPENAI_API_KEY

# 4. å†èµ·å‹•
mvn quarkus:dev
```

### **æ–¹æ³•2: .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼ˆæŽ¨å¥¨ï¼‰**

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > .env << 'EOF'
OPENAI_API_KEY=sk-proj-your-actual-key
EOF

# å†èµ·å‹•ï¼ˆç’°å¢ƒå¤‰æ•°ã¯è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã‚‹ï¼‰
mvn quarkus:dev
```

### **æ–¹æ³•3: application.yaml ã§ç›´æŽ¥è¨­å®šï¼ˆéžæŽ¨å¥¨ï¼‰**

```yaml
# src/main/resources/application.yaml
llm:
  openai:
    api-key: sk-proj-your-actual-key  # âš ï¸ Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã“ã¨ï¼
```

---

## ðŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **å•é¡Œ1: ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãŸã®ã«ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®ã¾ã¾**

**åŽŸå› **: ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹**å‰**ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ãŸ

**è§£æ±ºæ–¹æ³•**:
1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ï¼ˆCtrl+Cï¼‰
2. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
3. å†èµ·å‹•

### **å•é¡Œ2: ãƒ­ã‚°ã«ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„**

**åŽŸå› **: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã¦ã„ãªã„ã€ã¾ãŸã¯åˆ¥ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**è§£æ±ºæ–¹æ³•**:
- æ­£ã—ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¢ºèª: `/api/camel/verify`
- curlã‚³ãƒžãƒ³ãƒ‰ã‚’æ­£ç¢ºã«å®Ÿè¡Œ

### **å•é¡Œ3: ãƒ­ã‚°ãŒJSONå½¢å¼ã§èª­ã¿ã«ãã„**

**è§£æ±ºæ–¹æ³•**: æ”¹å–„ã•ã‚ŒãŸãƒ­ã‚°ã¯ä»¥ä¸‹ã®å½¢å¼ã§è¡¨ç¤ºã•ã‚Œã¾ã™

```
========================================
LLMã«è³ªå•: ...
========================================
```

ã“ã®åŒºåˆ‡ã‚Šç·šã§å›²ã¾ã‚ŒãŸéƒ¨åˆ†ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## ðŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã‚’æŠœã‘å‡ºã™ãŸã‚ã®ç¢ºèªé …ç›®ï¼š

- [ ] ç’°å¢ƒå¤‰æ•° `OPENAI_API_KEY` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
  ```bash
  echo $OPENAI_API_KEY
  ```

- [ ] ç’°å¢ƒå¤‰æ•°ã®å€¤ãŒæ­£ã—ã„ã‹ï¼ˆ`sk-proj-...` ã¾ãŸã¯ `sk-...`ï¼‰

- [ ] ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãŸ**å¾Œ**ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ãŸã‹

- [ ] ãƒ­ã‚°ã«ã€Œâœ… å‹•ä½œãƒ¢ãƒ¼ãƒ‰: OpenAI APIå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã‹

- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè³ªå•ã®å†…å®¹ã«å¿œã˜ã¦å¤‰åŒ–ã™ã‚‹ã‹

---

## ðŸŽ“ ã¾ã¨ã‚

### **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®šã®ãƒã‚¤ãƒ³ãƒˆ**

1. **åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**: `LLMService.java` ã®53-56è¡Œç›®
2. **ç’°å¢ƒå¤‰æ•°é€£æº**: `application.yaml` ã® `${OPENAI_API_KEY:demo-mode}`
3. **ãƒ­ã‚°å‡ºåŠ›**: æ”¹å–„ã«ã‚ˆã‚Šã€å¿…ãšè¡¨ç¤ºã•ã‚Œã‚‹
4. **åˆ¤å®šæ¡ä»¶**: 4ã¤ã®æ¡ä»¶ã®ã„ãšã‚Œã‹1ã¤ã§ã‚‚è©²å½“ã™ã‚Œã°ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰

### **OpenAI APIã‚’ä½¿ã†ã«ã¯**

1. âœ… æœ‰åŠ¹ãªAPIã‚­ãƒ¼ã‚’ç”¨æ„
2. âœ… ç’°å¢ƒå¤‰æ•°ã¾ãŸã¯ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®š
3. âœ… ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•
4. âœ… ãƒ­ã‚°ã§ã€Œâœ… å‹•ä½œãƒ¢ãƒ¼ãƒ‰: OpenAI APIå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã€ã‚’ç¢ºèª

---

**ä½œæˆæ—¥**: 2025å¹´11æœˆ5æ—¥  
**å¯¾å¿œãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Java 21 + Quarkus 3.6

